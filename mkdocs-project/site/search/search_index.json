{"config":{"lang":["ru","en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"# # Welcome to MkDocs","text":"<p>For full documentation visit mkdocs.org.</p>"},{"location":"#commands","title":"Commands","text":"<ul> <li><code>mkdocs new [dir-name]</code> - Create a new project.</li> <li><code>mkdocs serve</code> - Start the live-reloading docs server.</li> <li><code>mkdocs build</code> - Build the documentation site.</li> <li><code>mkdocs -h</code> - Print help message and exit.</li> </ul>"},{"location":"#project-layout","title":"Project layout","text":"<pre><code>mkdocs.yml    # The configuration file.\ndocs/\n    index.md  # The documentation homepage.\n    ...       # Other markdown pages, images and other files.\n</code></pre> <p> !!! warning \"Warning\"</p> <pre><code>Your warning content here\n</code></pre> <p>!!! note \"Note\"</p> <pre><code>Your note content here\n</code></pre> <p>??? note \"Foldable Title\"</p> <pre><code>Your foldable content here\n</code></pre>"},{"location":"#boldbold-n-n-notenn-notenn","title":"# ## ## boldbold---\\n---\\n??? note\\n\\n    ??? note\\n\\n","text":""},{"location":"create/","title":"New File","text":"<p>adasdasdasda Start editing here... </p> <p></p> <p>??? note \"Foldable Title\"</p> <pre><code>Your foldable content here\n</code></pre> <p>!!! note \"Note Title\"</p> <pre><code>Your note content here\n</code></pre> <p> </p>","tags":["tag","tag2"]},{"location":"index2/","title":"Monitoring Proxmox with InfluxDB and Grafana in 4 Easy steps","text":"<p>Table of Contents</p>"},{"location":"index2/#introduction","title":"Introduction","text":"<pre><code>def example():\n    pass\n</code></pre> <p>Monitoring Proxmox with Grafana will be a good idea to see the actual resource utilization on our Proxmox cluster. Already we have covered in our previous guide about \u201cHow to monitor Linux servers using Prometheus and Grafana\u201c. However, in this guide let\u2019s focus on how to monitor the Proxmox virtualization platform with the help of Proxmox and influxDb.</p> <p>Proxmox supports Graphite and InfluxDB while comparing the advantage of using InfluxDB and graphite, InfluxDB owns the match. Let\u2019s start to setup influx DB by following below guide.</p> <ul> <li>How to Install InfluxDB on Linux</li> </ul> <p>Right after installing the InfluxDB, start to create the DB user, Database with required privileges.</p>"},{"location":"index2/#creating-a-monitoring-database","title":"Creating a Monitoring Database","text":"<p>Creating database for monitoring Proxmox, Replace the user and password value as per standard to your setup.</p> <pre><code>CREATE USER admin WITH PASSWORD 'Redhat@123' WITH ALL PRIVILEGES\nCREATE DATABASE mondb\nCREATE USER monuser WITH PASSWORD 'Redhat@123'\nGRANT ALL ON mondb TO monuser\nexit\n</code></pre> <p>Create, Verify and list the created database</p> <pre><code>sysadmin@monitor:~$ influx\nConnected to http://localhost:8086 version 1.8.3\nInfluxDB shell version: 1.8.3\n&gt; CREATE USER admin WITH PASSWORD 'Redhat@123' WITH ALL PRIVILEGES\n&gt; CREATE DATABASE mondb\n&gt; CREATE USER monuser WITH PASSWORD 'Redhat@123'\n&gt; GRANT ALL ON mondb TO monuser\n&gt; SHOW GRANTS FOR monuser\ndatabase privilege\n-------- ---------\nmondb    ALL PRIVILEGES\n&gt; SHOW DATABASES\nname: databases\nname\n----\n_internal\nmondb\n&gt; \n&gt; exit\nsysadmin@monitor:~$\n</code></pre>"},{"location":"index2/#influxdb-configuration-for-proxmox","title":"InfluxDB configuration for Proxmox","text":"<p>Few configurations are required for Proxmox. Edit the main configuration for Influxdb to add the require options</p> <pre><code>$ sudo vim /etc/influxdb/influxdb.conf\n</code></pre> <p>This port should match to Proxmox metric configuration.</p> <p>DataCenter \u2013&gt; Metric Server \u2013&gt; Add \u2013&gt; InfluxDB</p> <pre><code>[[udp]]\n   enabled = true\n   bind-address = \":8089\"\n   database = \"mondb\"\n   batch-size = 5000\n   batch-timeout = \"1s\"\n</code></pre> <p>Make sure to use the database we created in earlier steps.</p>"},{"location":"index2/#install-grafana-for-monitoring-proxmox","title":"Install Grafana for Monitoring Proxmox","text":"<p>First, let\u2019s start to resolve the required dependencies for Grafana installation.</p> <pre><code>$ sudo apt-get install -y apt-transport-https\n$ sudo apt-get install -y software-properties-common wget\n</code></pre> <p>Import the apt key for grafana</p> <pre><code>$ wget -q -O - https://packages.grafana.com/gpg.key | sudo apt-key add -\n</code></pre> <p>Enable the repository, If you are running from unprivileged account it will prompt to enter the password for privilege escalation.</p> <pre><code>$ echo \"deb https://packages.grafana.com/oss/deb stable main\" | sudo tee -a /etc/apt/sources.list.d/grafana.list\n</code></pre> <p>Installing Grafana, update the apt cache and by following install the Grafana.</p> <pre><code>$ sudo apt-get update\n$ sudo apt-get install grafana\n</code></pre> <pre><code>Unpacking grafana (7.3.6) ...\nSetting up fonts-dejavu-core (2.37-1) ...\nSetting up fontconfig-config (2.13.1-2ubuntu3) ...\nSetting up libfontconfig1:amd64 (2.13.1-2ubuntu3) ...\nSetting up grafana (7.3.6) ...\nAdding system user `grafana' (UID 112) ...\nAdding new user `grafana' (UID 112) with group `grafana' ...\nNot creating home directory `/usr/share/grafana'.\n\n\n### NOT starting on installation, please execute the following statements to configure grafana to start automatically using systemd\n sudo /bin/systemctl daemon-reload\n sudo /bin/systemctl enable grafana-server\n\n\n### You can start grafana-server by executing\n sudo /bin/systemctl start grafana-server\nProcessing triggers for systemd (245.4-4ubuntu3) ...\nProcessing triggers for man-db (2.9.1-1) ...\nProcessing triggers for libc-bin (2.31-0ubuntu9) ...\n</code></pre>"},{"location":"index2/#configuring-grafana","title":"Configuring Grafana","text":"<p>Post to Grafana installation, we need to make few changes.</p> <pre><code>$ sudo vim /etc/grafana/grafana.ini\n</code></pre> <p>Few of interesting configurations for monitoring Proxmox are as follows. If you need to setup a default admin account and password we need to set here before starting the Grafana service.</p> <pre><code>[paths]\nlogs = /var/log/grafana\nplugins = /var/lib/grafana/plugins\n\n[server]\nprotocol = http\nhttp_port = 3000\n\n[security]\nadmin_user = admin\nadmin_password = admin\n</code></pre> <p>Make the Systemd configuration changes by running \u201cdaemon-reload\u201d by following enable and start the service persistently.</p> <pre><code>$ sudo systemctl daemon-reload\n$ sudo systemctl enable grafana-server\n$ sudo systemctl start grafana-server\n$ sudo systemctl status grafana-server\n</code></pre>"},{"location":"index2/#installing-plugins-and-dashboard","title":"Installing Plugins and Dashboard","text":"<p>Few of cool dashboards are listed below. We will use anyone of below dashboard soon in upcoming steps.</p> <pre><code>https://grafana.com/grafana/dashboards/10048\nhttps://grafana.com/grafana/dashboards/13307\nhttps://grafana.com/grafana/dashboards/11418\nhttps://grafana.com/grafana/dashboards/11416\n</code></pre> <p>If any plugins are missing we could get the alerts in the dashboard. Install the missing plugins by running below command, replace the plugin name with your missing plugin name.</p> <pre><code>$ sudo grafana-cli plugins install grafana-clock-panel\n$ sudo grafana-cli plugins install blackmirror1-singlestat-math-panel\n</code></pre> <p>Search for the plugins at <code>https://grafana.com/grafana/plugins</code></p> <pre><code>sysadmin@monitor:~$ sudo grafana-cli plugins install grafana-clock-panel\ninstalling grafana-clock-panel @ 1.1.1\nfrom: https://grafana.com/api/plugins/grafana-clock-panel/versions/1.1.1/download\ninto: /var/lib/grafana/plugins\n\n Installed grafana-clock-panel successfully \n\nRestart grafana after installing plugins . &lt;service grafana-server restart&gt;\n\nsysadmin@monitor:~$ \n\nsysadmin@monitor:~$ sudo grafana-cli plugins install blackmirror1-singlestat-math-panel\ninstalling blackmirror1-singlestat-math-panel @ 1.1.7\nfrom: https://grafana.com/api/plugins/blackmirror1-singlestat-math-panel/versions/1.1.7/download\ninto: /var/lib/grafana/plugins\n\n Installed blackmirror1-singlestat-math-panel successfully \n\nRestart grafana after installing plugins . &lt;service grafana-server restart&gt;\n\nsysadmin@monitor:~$\n</code></pre> <p>Now if you check the database, we could see some tables and columns.</p> <pre><code>sysadmin@monitor:~$ influx -database 'mondb' -username 'mondb' -password 'Redhat@123'\nConnected to http://localhost:8086 version 1.8.3\nInfluxDB shell version: 1.8.3\n&gt; show databases\nname: databases\nname\n----\n_internal\nmondb\nlinuxsys_db\n&gt; \n&gt; use mondb\nUsing database mondb\n&gt; \n&gt; show MEASUREMENTS\nname: measurements\nname\n----\nballooninfo\nblockstat\ncpustat\nmemory\nnics\nproxmox-support\nsystem\n&gt; \n</code></pre>"},{"location":"index2/#accessing-grafana","title":"Accessing Grafana","text":"<p>Right after starting the Grafana service, access the URL from anyone of your favorite web browser. The default port of Grafana is 3000.</p> <pre><code>https://monitor.linuxsysadmins.local:3000\n</code></pre> <p>The default username and password are <code>admin</code> and <code>admin</code></p> <p>If you are accessing dashboard for the first time, it will prompt to change the password.</p> <p></p> <p>Login to grafana</p>"},{"location":"index2/#adding-data-source-for-monitoring-proxmox","title":"Adding Data Source for Monitoring Proxmox","text":"<p>As we have installed and configured to use the InfluxDB for Proxmox, now we need to add the data source with InfluxDB database information.</p> <p>Navigate to Settings  gear icon \u2013&gt; and select the Data Sources.</p> <p></p> <p>Adding datasource in grafana</p> <p>Click the Add data source</p> <p></p> <p>Click to add source</p> <p>Select InfluxDB by clicking on it.</p> <p></p> <p>Select influxdb as sources</p> <p>Feed the HTTP URL where the InfluxDB installed, In our case its on same server where we installed Grafana.</p> <p></p> <p>adding influxdb server info</p> <p>Provide the InfluxDB information and select either GET or POST for HTTP method.</p> <p>Click the Save &amp; Test to make the connection test and save the configuration.</p> <p></p> <p>Influxdb database info</p> <p>Data Source has been successfully added to start monitoring Proxmox. Now we could see the added Data source in the list.</p> <p></p> <p>Added data source</p>"},{"location":"index2/#importing-predefined-dashboards","title":"Importing Predefined Dashboards","text":"<p>There are only very few pre-defined dashboards are available for Proxmox. In our earlier step, We have shared few of dashboards URL. Get the dashboard ID from there</p> <p>Click the + Symbol from left side pane and select the Import</p> <p></p> <p>Importing preconfigured dashboard</p> <p>Each predefined dashboard have a ID, copy paste the ID and click load.</p> <p>Here we are using ID 12966 for demonstration purpose.</p> <p></p> <p>Import preconfigured dashboards</p> <p>Select all the sources as InfluxDB</p> <p></p> <p>select the data sources</p>"},{"location":"index2/#proxmox-webui-configuration","title":"Proxmox WebUI Configuration","text":"<p>Switch back to Proxmox webUI and configure the InfluxDB from metrics.</p> <ul> <li> <p>Navigate to Server View from the drop-down list.</p> </li> <li> <p>Select the Datacenter from the list.</p> </li> <li> <p>Click on Metric from right side pane above the support option.</p> </li> <li> <p>Click Add and select the InfluxDB</p> </li> </ul> <p></p> <p>Adding metric configuration to Proxmox</p> <p>Now we could get the below window.</p> <ul> <li> <p>Enter a Name</p> </li> <li> <p>IP address or hostname of the monitoring server, In my case 192.168.0.50 resolving to monitor.linuxsysadmins.local</p> </li> <li> <p>Select the Enabled option.</p> </li> <li> <p>Enter the Port number where the data should be sent.</p> </li> <li>Click create to create the entry.</li> </ul> <p></p> <p>Influxdb server info in proxmox</p> <p>To make sure the changes from Proxmox command line.</p> <pre><code>root@pve1:~# cat /etc/pve/status.cfg\ninfluxdb: monitor\n    port 8089\n    server 192.168.0.50\n\nroot@pve1:~#\n</code></pre>"},{"location":"index2/#viewing-grafana-dashboards","title":"Viewing Grafana Dashboards","text":"<p>Back to Grafana GUI and check the Dashboards, now you could get some graphs.</p> <p></p> <p>Dashboard with metric</p> <p>More information.</p> <p></p> <p>Metric info</p> <p>That\u2019s it, we have successfully started to get visualize the Proxmox environment.</p>"},{"location":"index2/#conclusion","title":"Conclusion","text":"<p>To get the metric information of Proxmox Virtualization platform we can use the Grafana with InfluxDB. By installing the InfluxDB and start using Grafana in a few minutes to get a good visualization on your resource utilization in your Proxmox environment. Subscribe to our newsletter and stay close for more updates, your feedbacks are welcome through below comment section.</p> <p>Source: Monitoring Proxmox with InfluxDB and Grafana in 4 Easy steps</p>"},{"location":"newfile65/","title":"Newfile65","text":""},{"location":"newfile65/#-","title":"---","text":""},{"location":"newfile65/#new-file","title":"New File","text":"<p>Start editing here...</p> <p>\u0444\u0430\u0446\u0430\u0444\u0430\u044b\u0444\u0430\u0444\u044b\u0432\u0444</p>"},{"location":"newfile65/#123","title":"123","text":"<p>bold</p> <p>!!! note \"Note Title\"</p> <pre><code>Your note content here\n</code></pre> <p>\\    </p> <p>??? note\\n\\n    </p>"},{"location":"test/","title":"Test","text":""},{"location":"test/#-","title":"---","text":""},{"location":"test/#new-file","title":"New File","text":""},{"location":"test/#_1","title":"\u0422\u0435\u0441\u0442 \u043f\u043e\u0434\u0441\u0432\u0435\u0442\u043a\u0438 \u043a\u043e\u0434\u0430","text":"<pre><code>def hello():\n    print(\"\u041f\u0440\u0438\u0432\u0435\u0442, \u043c\u0438\u0440!\")\n</code></pre> <pre><code>console.log(\"Hello World\");\n</code></pre>"},{"location":"dir/file35/","title":"File35","text":""},{"location":"dir/file35/#-","title":"---","text":""},{"location":"dir/file35/#new-file","title":"New File","text":"<p>Start editing here...</p>"},{"location":"qweqew3/newfile2/","title":"New File","text":"<p>Start editing here...</p>","tags":["tag","tag2","tag3"]},{"location":"qweqew4/newfile2/","title":"New File","text":"<p>Start editing here...</p>","tags":["tag","tag2","tag3"]},{"location":"test2/newfile52/","title":"Newfile52","text":""},{"location":"test2/newfile52/#-","title":"---","text":""},{"location":"test2/newfile52/#new-file","title":"New File","text":"<p>Start editing here...</p>"},{"location":"%D0%B2%D1%88%D0%BA3/newfile2/","title":"Newfile2","text":""},{"location":"%D0%B2%D1%88%D0%BA3/newfile2/#-","title":"---","text":""},{"location":"%D0%B2%D1%88%D0%BA3/newfile2/#new-file","title":"New File","text":"<p>Start editing here...</p>"},{"location":"%D0%B2%D1%88%D0%BA3/newfile52/","title":"New File","text":"<p>Start editing here...</p>","tags":["tag","tag2","tag3"]},{"location":"%D0%B2%D1%88%D0%BA%D0%BE%D0%B0%D0%BE/newfile52/","title":"New File","text":"<p>Start editing here...</p>","tags":["tag","tag2"]},{"location":"%D0%B9%D1%86%D1%83%D0%BA/%D1%81%D0%BE%D0%B7%D0%B4%D0%B0%D0%BD%D0%B8%D0%B5/","title":"\u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435","text":""},{"location":"%D0%B9%D1%86%D1%83%D0%BA/%D1%81%D0%BE%D0%B7%D0%B4%D0%B0%D0%BD%D0%B8%D0%B5/#-","title":"---","text":""},{"location":"%D0%B9%D1%86%D1%83%D0%BA/%D1%81%D0%BE%D0%B7%D0%B4%D0%B0%D0%BD%D0%B8%D0%B5/#new-file","title":"New File","text":"<p>Start editing here...</p>"},{"location":"%D0%B9%D1%86%D1%83%D0%BA/%D1%86%D0%B9%D1%83%D1%86%D1%83%D0%B9%D1%86/","title":"\u0426\u0439\u0443\u0446\u0443\u0439\u0446","text":""},{"location":"%D0%B9%D1%86%D1%83%D0%BA/%D1%86%D0%B9%D1%83%D1%86%D1%83%D0%B9%D1%86/#-","title":"---","text":""},{"location":"%D0%B9%D1%86%D1%83%D0%BA/%D1%86%D0%B9%D1%83%D1%86%D1%83%D0%B9%D1%86/#new-file","title":"New File","text":"<p>Start editing here...</p>"}]}